<!-- Sorting Options Start -->
<div class="d-flex align-items-center justify-content-between mb-4">
    <div>
        @* <button class="btn btn-sm btn-light"><i class="fa fa-th-large"></i></button>
        <button class="btn btn-sm btn-light ml-2"><i class="fa fa-bars"></i></button> *@
    </div>
    <div class="ml-2">
        <div class="btn-group">
            <button type="button" class="btn btn-sm btn-light dropdown-toggle"
                data-toggle="dropdown">Sort By</button>
            <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item @(ViewBag.OrderBy == Domain.OrderBy.NameAsc ? "active" : "")" 
                   href="javascript:void(0);" onclick="applySorting('@Domain.OrderBy.NameAsc')">
                    Name (A-Z)
                </a>
                <a class="dropdown-item @(ViewBag.OrderBy == Domain.OrderBy.NameDesc ? "active" : "")" 
                   href="javascript:void(0);" onclick="applySorting('@Domain.OrderBy.NameDesc')">
                    Name (Z-A)
                </a>
                <a class="dropdown-item @(ViewBag.OrderBy == Domain.OrderBy.PriceAsc ? "active" : "")" 
                   href="javascript:void(0);" onclick="applySorting('@Domain.OrderBy.PriceAsc')">
                    Price (Low to High)
                </a>
                <a class="dropdown-item @(ViewBag.OrderBy == Domain.OrderBy.PriceDesc ? "active" : "")" 
                   href="javascript:void(0);" onclick="applySorting('@Domain.OrderBy.PriceDesc')">
                    Price (High to Low)
                </a>
                <a class="dropdown-item @(ViewBag.OrderBy == Domain.OrderBy.NewestDesc ? "active" : "")" 
                   href="javascript:void(0);" onclick="applySorting('@Domain.OrderBy.NewestDesc')">
                    Newest First
                </a>
                <a class="dropdown-item @(ViewBag.OrderBy == Domain.OrderBy.PopularityDesc ? "active" : "")" 
                   href="javascript:void(0);" onclick="applySorting('@Domain.OrderBy.PopularityDesc')">
                    Most Popular
                </a>
            </div>
        </div>
        <div class="btn-group ml-2">
            <button type="button" class="btn btn-sm btn-light dropdown-toggle"
                data-toggle="dropdown">Show</button>
            <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item" href="javascript:void(0);" onclick="changePageSize(10)">10</a>
                <a class="dropdown-item" href="javascript:void(0);" onclick="changePageSize(30)">30</a>
                <a class="dropdown-item" href="javascript:void(0);" onclick="changePageSize(50)">50</a>
            </div>
        </div>
    </div>
</div>

<script>
    function applySorting(sortOrder) {
        // Get the current URL and parse its parameters
        let url = new URL(window.location.href);
        let params = new URLSearchParams(url.search);
        
        // Update the orderBy parameter
        params.set('orderBy', sortOrder);
        
        // Reset to page 1 when sorting
        params.set('pageNumber', '1');
        
        // Construct the new URL with updated parameters
        url.search = params.toString();
        window.location.href = url.toString();
    }
    
    function changePageSize(size) {
        // Get the current URL and parse its parameters
        let url = new URL(window.location.href);
        let params = new URLSearchParams(url.search);
        
        // Update the pageSize parameter
        params.set('pageSize', size);
        
        // Reset to page 1 when changing page size
        params.set('pageNumber', '1');
        
        // Construct the new URL with updated parameters
        url.search = params.toString();
        window.location.href = url.toString();
    }
</script>
<!-- Sorting Options End -->
